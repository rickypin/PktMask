{
  "timestamp": "2025-07-09T20:52:34.739105",
  "total_tests": 8,
  "passed_tests": 6,
  "failed_tests": 2,
  "total_duration": 1.476125717163086,
  "overall_success": false,
  "tests": [
    {
      "name": "functionality",
      "success": false,
      "duration": 0.06525397300720215,
      "details": {
        "unit": {
          "returncode": 1,
          "stdout": "",
          "stderr": "/Users/ricky/Downloads/PktMask/venv/bin/python: No module named pytest\n"
        },
        "integration": {
          "returncode": 1,
          "stdout": "",
          "stderr": "/Users/ricky/Downloads/PktMask/venv/bin/python: No module named pytest\n"
        },
        "e2e": {
          "returncode": 1,
          "stdout": "",
          "stderr": "/Users/ricky/Downloads/PktMask/venv/bin/python: No module named pytest\n"
        }
      },
      "error": "部分测试失败"
    },
    {
      "name": "performance",
      "success": true,
      "duration": 0.0016093254089355469,
      "details": {
        "import_time_seconds": 0.001402139663696289,
        "import_success": true,
        "memory_rss_mb": 18.109375,
        "memory_vms_mb": 401244.234375
      },
      "error": null
    },
    {
      "name": "code_quality",
      "success": false,
      "duration": 0.0512080192565918,
      "details": {
        "complexity": {
          "passed": false,
          "total_lines": 31718,
          "total_files": 128,
          "avg_lines_per_file": 247.796875,
          "large_files": [
            {
              "file": "pktmask/tools/tls23_marker.py",
              "lines": 619
            },
            {
              "file": "pktmask/tools/enhanced_tls_marker.py",
              "lines": 627
            },
            {
              "file": "pktmask/core/strategy.py",
              "lines": 656
            },
            {
              "file": "pktmask/gui/main_window.py",
              "lines": 935
            },
            {
              "file": "pktmask/gui/managers/ui_manager.py",
              "lines": 640
            },
            {
              "file": "pktmask/gui/managers/report_manager.py",
              "lines": 992
            },
            {
              "file": "pktmask/core/encapsulation/parser.py",
              "lines": 516
            },
            {
              "file": "pktmask/core/tcp_payload_masker/protocol_control.py",
              "lines": 506
            },
            {
              "file": "pktmask/core/tcp_payload_masker/tcp_masker.py",
              "lines": 823
            },
            {
              "file": "pktmask/core/tcp_payload_masker/keep_range_models.py",
              "lines": 537
            },
            {
              "file": "pktmask/core/processors/tls_mask_rule_generator.py",
              "lines": 646
            },
            {
              "file": "pktmask/core/processors/tshark_enhanced_mask_processor.py",
              "lines": 1292
            },
            {
              "file": "pktmask/core/processors/scapy_mask_applier.py",
              "lines": 656
            },
            {
              "file": "pktmask/core/processors/tshark_tls_analyzer.py",
              "lines": 938
            },
            {
              "file": "pktmask/core/trim/strategies/tls_strategy.py",
              "lines": 871
            },
            {
              "file": "pktmask/core/trim/testing/ab_test_framework.py",
              "lines": 631
            },
            {
              "file": "pktmask/core/trim/testing/ab_test_report.py",
              "lines": 798
            },
            {
              "file": "pktmask/core/trim/migration/strategy_migrator.py",
              "lines": 508
            }
          ]
        },
        "duplication": {
          "passed": false,
          "duplicate_classes": [
            "ValidationError",
            "FallbackConfig",
            "MaskRange",
            "ABTestReport",
            "AnonymizationStrategy",
            "ReportFormat",
            "StageBase",
            "ErrorSeverity",
            "ResourceError",
            "ErrorContext",
            "StageStats",
            "PerformanceTracker",
            "ComparisonResult",
            "ProcessingError",
            "FileType",
            "MaskingStatistics",
            "MaskAfter",
            "ConfigurationError",
            "KeepAll"
          ],
          "duplicate_functions": [
            "_hex_to_bytes",
            "main"
          ]
        },
        "imports": {
          "passed": false,
          "issues": [
            "深层相对导入: pktmask/core/trim/testing/ab_test_framework.py"
          ]
        },
        "file_sizes": {
          "passed": true,
          "total_size_mb": 1.135117530822754,
          "large_files": [
            {
              "file": "pktmask/core/processors/tshark_enhanced_mask_processor.py",
              "size_kb": 57.2490234375
            }
          ]
        }
      },
      "error": "代码质量检查未通过"
    },
    {
      "name": "dependencies",
      "success": true,
      "duration": 0.18645977973937988,
      "details": {
        "pktmask": {
          "success": true,
          "error": null
        },
        "pktmask.core": {
          "success": true,
          "error": null
        },
        "pktmask.gui": {
          "success": true,
          "error": null
        },
        "pktmask.cli": {
          "success": true,
          "error": null
        }
      },
      "error": null
    },
    {
      "name": "interfaces",
      "success": true,
      "duration": 1.0585689544677734,
      "details": {
        "cli": {
          "success": true
        },
        "gui": {
          "success": true
        }
      },
      "error": null
    },
    {
      "name": "memory_usage",
      "success": true,
      "duration": 0.0001678466796875,
      "details": {
        "initial_memory_mb": 38.0,
        "after_import_memory_mb": 38.0,
        "memory_increase_mb": 0.0
      },
      "error": null
    },
    {
      "name": "error_handling",
      "success": true,
      "duration": 0.11272883415222168,
      "details": {
        "invalid_input": {
          "handled_gracefully": true
        }
      },
      "error": null
    },
    {
      "name": "documentation",
      "success": true,
      "duration": 0.0001289844512939453,
      "details": {
        "required_docs": {
          "all_present": true,
          "missing": []
        }
      },
      "error": null
    }
  ]
}